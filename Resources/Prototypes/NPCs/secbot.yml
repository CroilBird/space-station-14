- type: htnCompound
  id: SecBotCompound
  branches:
    - tasks:
      - !type:HTNPrimitiveTask
        operator: !type:UtilityOperator
          proto: NearbySecurityThreat
      - !type:HTNCompoundTask
        task: SecBorgStunCuffTarget

- type: htnCompound
  id: SecBorgStunCuffTarget
  branches:
  - preconditions:
    - !type:TargetStunnedPrecondition
      invert: true
      key: Target
    tasks:
      - !type:HTNCompoundTask
        task: SecBorgStunTarget
  - preconditions:
    - !type:TargetStunnedPrecondition
      key: Target
    tasks:
    - !type:HTNCompoundTask
      task: SecBorgCuffTarget

- type: htnCompound
  id: SecBorgStunTarget
  branches:
  - tasks:
    - !type:HTNPrimitiveTask
      operator: !type:SpeakDatasetOperator
        dataset: BeepskyArrest

    - !type:HTNPrimitiveTask
      operator: !type:SwapToHandOperator
        hand: hand_baton

    - !type:HTNPrimitiveTask
      operator: !type:ToggleInHandItemOperator
        toggle: true

    - !type:HTNPrimitiveTask
      operator: !type:MoveToOperator
        shutdownState: PlanFinished
        pathfindInPlanning: true
        removeKeyOnFinish: false
        targetKey: TargetCoordinates
        pathfindKey: TargetPathfind
        rangeKey: MeleeRange

    - !type:HTNPrimitiveTask
      operator: !type:StunOperator
        targetKey: Target

- type: htnCompound
  id: SecBorgCuffTarget
  branches:
  - tasks:
    - !type:HTNPrimitiveTask
      operator: !type:SwapToHandOperator
        hand: hand_ziptie

    - !type:HTNPrimitiveTask
      operator: !type:MoveToOperator
        pathfindInPlanning: true
        removeKeyOnFinish: false
        targetKey: TargetCoordinates
        pathfindKey: TargetPathfind
        rangeKey: InteractRange

    - !type:HTNPrimitiveTask
      preconditions:
      - !type:TargetInRangePrecondition
        targetKey: Target
        rangeKey: InteractRange
      operator: !type:InteractWithOperator
        targetKey: Target

    - !type:HTNPrimitiveTask
      operator: !type:RemoveBlackboardOperator
        key: Target
